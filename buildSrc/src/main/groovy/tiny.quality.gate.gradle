plugins {
    id 'org.sonarqube'
    id 'tiny.java.test'
}

sonarqube {
    properties {
        property "sonar.projectKey", "${project.name}"
        property "sonar.organization", "code-affine"
        property "sonar.host.url", "https://sonarcloud.io"
        property "sonar.sourceEncoding", "UTF-8"
        property "sonar.language", "java"
        property "sonar.sources", "src/main/java"
        property "sonar.java.source", "17"
    }
}

tasks.named('sonarqube').configure {
    dependsOn test
}
